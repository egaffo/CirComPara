import os

Import('*')

env = env.Clone()

## set logging id
log_id = "[TRANSCRIPT FASTA]"
try:
    env['LOG_PREFIX'] = env['LOG_PREFIX'] + log_id
except KeyError:
    env['LOG_PREFIX'] = log_id

env['ENV']['LOG_PREFIX'] = env['LOG_PREFIX']

## NEEDS: 'gffread' from Cufflinks packages
#transcript_sequences_annotation: the GFF annotation (e.g. merge.gtf from cuffmerge)
#transcript_sequences_genome: the genome in FASTA format (single multifasta preferred,not compressed)

fastas_cmd = 'gffread -w ${TARGET} -g ${SOURCES[0]} ${SOURCES[1]}'
fastas = env.Command('transcripts.fa', 
                     [transcript_sequences_genome, transcript_sequences_annotation], 
                     fastas_cmd)

Return('fastas')

